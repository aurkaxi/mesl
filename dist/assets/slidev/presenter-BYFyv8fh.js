import{aj as Y,z as x,d as y,o as l,c as d,i as _,B as n,ak as Z,Q as V,b as m,ag as ee,al as te,e as t,ac as M,g as W,k,f as se,x as O,h as N,am as oe,F as G,ai as ne,a7 as D,t as L,E,W as re,L as le,P as ae,an as ie,l as v,ao as ue}from"../modules/vue-C2lnHokf.js";import{b as P,a as ce,u as de,c as me,d as pe,h as ve,j as fe,k as xe,l as _e,m as ge,n as ke,s as ye,_ as be}from"../index-DdgsCuCC.js";import{b as Ce,c as he,a as R,S as Se}from"./SlideWrapper-kPQcEpjS.js";import{r as we,u as $e,a as ze,S as Me,o as Ve,_ as Ne,G as Te,b as Fe,c as je}from"./shortcuts-DoEMau-3.js";import{_ as Be,C as De}from"./NoteDisplay.vue_vue_type_style_index_0_lang-BK_W43ip.js";import{_ as Le}from"./DrawingControls.vue_vue_type_style_index_0_lang-Dtrzo3Vl.js";import{_ as A}from"./IconButton.vue_vue_type_script_setup_true_lang--y6rTil7.js";import"../modules/shiki-CyLzlmHu.js";import"./context-DbWMLEBD.js";import"../modules/unplugin-icons-BNPlpnzC.js";function Ee(){const{counter:a,isActive:e,reset:r,pause:o,resume:i}=Y(1e3,{controls:!0});return{timer:x(()=>{const c=a.value,w=Math.floor(c%60).toString().padStart(2,"0");return`${Math.floor(c/60).toString().padStart(2,"0")}:${w}`}),isTimerActive:e,resetTimer:r,toggleTimer:()=>e.value?o():i()}}const Pe=y({__name:"NoteStatic",props:{no:{},class:{},clicksContext:{}},setup(a){const e=a,{info:r}=Ce(e.no);return(o,i)=>{var p,c;return l(),d(Be,{class:_(e.class),note:(p=n(r))==null?void 0:p.note,"note-html":(c=n(r))==null?void 0:c.noteHTML,"clicks-context":o.clicksContext},null,8,["class","note","note-html","clicks-context"])}}}),Re={"h-full":"","w-full":""},Ae={key:0,"w-full":"","h-full":"",flex:"~ col gap-4 items-center justify-center"},He=y({__name:"ScreenCaptureMirror",setup(a){const e=Z("video"),r=V(null),o=V(!1);async function i(){r.value=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1,selfBrowserSurface:"include",preferCurrentTab:!1}),e.value.srcObject=r.value,e.value.play(),o.value=!0,r.value.addEventListener("inactive",()=>{e.value.srcObject=null,o.value=!1}),r.value.addEventListener("ended",()=>{e.value.srcObject=null,o.value=!1})}return(p,c)=>(l(),m("div",Re,[ee(t("video",{ref_key:"video",ref:e,class:"w-full h-full object-contain"},null,512),[[te,o.value]]),o.value?W("v-if",!0):(l(),m("div",Ae,[c[0]||(c[0]=t("div",{op50:""},[M(" Use screen capturing to mirror your main screen back to presenter view."),t("br"),M(" Click the button below and "),t("b",null,"select your other monitor or window"),M(". ")],-1)),t("button",{class:"slidev-form-button",onClick:i}," Start Screen Mirroring ")]))]))}}),H={error:0,client:60};function I(a,e=1){if(H[a])return S(H[a],e);let r=0;for(let i=0;i<a.length;i++)r=a.charCodeAt(i)+((r<<5)-r);const o=r%360;return S(o,e)}function S(a,e=1){const r=a===-1?0:P.value?50:100,o=P.value?60:20;return`hsla(${a}, ${r}%, ${o}%, ${e})`}const Ie=["textContent"],We=y({__name:"Badge",props:{text:{},color:{type:[Boolean,Number],default:!0},as:{},size:{}},setup(a){const e=a,r=x(()=>!e.text||e.color===!1?{}:{color:typeof e.color=="number"?S(e.color):I(e.text),background:typeof e.color=="number"?S(e.color,.1):I(e.text,.1)}),o=x(()=>{switch(e.size||"sm"){case"sm":return"px-1.5 text-11px leading-1.6em"}return""});return(i,p)=>(l(),d(oe(i.as||"span"),{"ws-nowrap":"",rounded:"",class:_(o.value),style:N(r.value)},{default:k(()=>[se(i.$slots,"default",{},()=>[t("span",{textContent:O(e.text)},null,8,Ie)])]),_:3},8,["class","style"]))}}),Oe={flex:"~ gap-1 items-center",rounded:"","bg-gray:2":"",p1:""},Ge=y({__name:"SegmentControl",props:{options:{},modelValue:{}},emits:["update:modelValue"],setup(a){return(e,r)=>(l(),m("div",Oe,[(l(!0),m(G,null,ne(e.options,o=>(l(),d(We,{key:o.value,class:_(["px-2 py-1 text-xs font-mono",o.value===e.modelValue?"":"op50"]),color:o.value===e.modelValue,"aria-pressed":o.value===e.modelValue,size:"none",text:o.label,as:"button",onClick:i=>e.$emit("update:modelValue",o.value)},null,8,["class","color","aria-pressed","text","onClick"]))),128))]))}}),Ue={class:"bg-main h-full slidev-presenter","pt-2px":""},qe={flex:"~ gap-4 items-center",border:"b main",p1:""},Qe={class:"relative grid-section next flex flex-col p-2 lg:p-4"},Je={key:1,class:"h-full flex justify-center items-center"},Ke={key:0,class:"grid-section note of-auto"},Xe={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},Ye={class:"grid-section bottom flex"},Ze={class:"group flex items-center justify-center pl-4 select-none"},et={class:"w-22px cursor-pointer"},tt={class:"group-not-hover:hidden flex flex-col items-center"},st={key:0,class:"i-carbon:pause text-lg"},ot={key:1,class:"i-carbon:play"},nt={class:"text-2xl px-3 my-auto tabular-nums"},rt={class:"progress-bar"},lt=y({__name:"presenter",setup(a){const e=D(),r=L();we(),$e(r),ze();const{clicksContext:o,currentSlideNo:i,currentSlideRoute:p,hasNext:c,nextRoute:w,slides:T,getPrimaryClicks:U,total:q}=ce(),{isDrawing:Q}=he();de({title:`Presenter - ${ye}`}),L(!1);const{timer:J,isTimerActive:K,resetTimer:F,toggleTimer:j}=Ee(),X=x(()=>T.value.map(g=>me(g))),f=x(()=>o.value.current<o.value.total?[p.value,o.value.current+1]:c.value?[w.value,0]:null),b=x(()=>f.value&&X.value[f.value[0].no-1]);E(f,()=>{b.value&&f.value&&(b.value.current=f.value[1])},{immediate:!0});const C=re("slidev-presenter-main-slide-mode","slides"),B=V();return le(()=>{const g=r.value.querySelector("#slide-content"),s=ae(ie()),h=D();E(()=>{if(!h.value||Q.value||!ve.value||!g)return;const u=g.getBoundingClientRect(),$=(s.x-u.left)/u.width*100,z=(s.y-u.top)/u.height*100;if(!($<0||$>100||z<0||z>100))return{x:$,y:z}},u=>{pe.cursor=u})}),(g,s)=>{var h;return l(),m(G,null,[t("div",Ue,[t("div",{class:_(["grid-container",`layout${n(fe)}`])},[t("div",{ref_key:"main",ref:r,class:"relative grid-section main flex flex-col"},[t("div",qe,[s[5]||(s[5]=t("span",{op50:"",px2:""},"Current",-1)),s[6]||(s[6]=t("div",{"flex-auto":""},null,-1)),v(Ge,{modelValue:n(C),"onUpdate:modelValue":s[0]||(s[0]=u=>ue(C)?C.value=u:null),options:[{label:"Slides",value:"slides"},{label:"Screen Mirror",value:"mirror"}]},null,8,["modelValue"])]),n(C)==="mirror"?(l(),d(He,{key:0})):(l(),d(R,{key:"main",class:"p-2 lg:p-4 flex-auto","is-main":"",onContextmenu:n(Ve)},{default:k(()=>[v(Me,{"render-context":"presenter"})]),_:1},8,["onContextmenu"])),(l(),d(De,{key:(h=n(p))==null?void 0:h.no,"clicks-context":n(U)(n(p)),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"]))],512),t("div",Qe,[f.value&&b.value?(l(),d(R,{key:"next"},{default:k(()=>[(l(),d(Se,{key:f.value[0].no,"clicks-context":b.value,route:f.value[0],"render-context":"previewNext"},null,8,["clicks-context","route"]))]),_:1})):(l(),m("div",Je,s[7]||(s[7]=[t("div",{class:"text-gray-500"}," End of the presentation ",-1)]))),s[8]||(s[8]=t("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1))]),B.value&&n(xe)?(l(),m("div",Ke,[v(n(B))])):(l(),m("div",Xe,[(l(),d(Pe,{key:`static-${n(i)}`,no:n(i),class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:N({fontSize:`${n(_e)}em`}),"clicks-context":n(o)},null,8,["no","style","clicks-context"])),s[12]||(s[12]=t("div",{"border-t":"","border-main":""},null,-1)),t("div",{class:_(["py-1 px-2 text-sm transition",n(e)?"":"op25"])},[v(A,{title:"Increase font size",onClick:n(ge)},{default:k(()=>s[9]||(s[9]=[t("div",{class:"i-carbon:zoom-in"},null,-1)])),_:1},8,["onClick"]),v(A,{title:"Decrease font size",onClick:n(ke)},{default:k(()=>s[10]||(s[10]=[t("div",{class:"i-carbon:zoom-out"},null,-1)])),_:1},8,["onClick"]),W("v-if",!0)],2)])),t("div",Ye,[v(Ne,{persist:!0,class:_(["transition",n(e)?"":"op25"])},null,8,["class"]),s[15]||(s[15]=t("div",{"flex-auto":""},null,-1)),t("div",Ze,[t("div",et,[s[14]||(s[14]=t("div",{class:"i-carbon:time group-hover:hidden text-xl"},null,-1)),t("div",tt,[t("div",{class:"relative op-80 hover:op-100",onClick:s[3]||(s[3]=(...u)=>n(j)&&n(j)(...u))},[n(K)?(l(),m("div",st)):(l(),m("div",ot))]),t("div",{class:"op-80 hover:op-100",onClick:s[4]||(s[4]=(...u)=>n(F)&&n(F)(...u))},s[13]||(s[13]=[t("div",{class:"i-carbon:renew"},null,-1)]))])]),t("div",nt,O(n(J)),1)])]),(l(),d(Le,{key:2}))],2),t("div",rt,[t("div",{class:"progress h-3px bg-primary transition-all",style:N({width:`${(n(i)-1)/(n(q)-1)*100+1}%`})},null,4)])]),v(Te),v(Fe),v(je)],64)}}}),_t=be(lt,[["__scopeId","data-v-48792409"]]);export{_t as default};
